<Ui xmlns="http://www.blizzard.com/wow/ui/" 
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://www.blizzard.com/wow/ui/..\FrameXML\UI.xsd">
	<Script file="Bagnon.lua"/>

	<!-- Bag -->
	<Frame name="BagnonBagSlotsTemplate" virtual="true">
		<Scripts>
			<OnLoad>
				BagnonBagFrame_OnLoad()
			</OnLoad>
			<OnEvent>
				BagnonBagFrame_OnEvent()
			</OnEvent>
		</Scripts>
	</Frame>
	<Button name="BagnonBagTemplate" virtual="true">
		<Size x="37" y="37"/>
		<Layers>
			<Layer level="BORDER">
				<Texture name="$parentIconTexture" setAllPoints="true"/>
				<FontString name="$parentCount" font="NumberFontNormalSmall" justifyH="RIGHT" hidden="true">
					<Anchors><Anchor point="BOTTOMRIGHT"><Offset x="1" y="2"/></Anchor><FontHeight><AbsValue val="10"/></FontHeight></Anchors>
				</FontString>
			</Layer>
		</Layers>
		<NormalTexture name="$parentNormalTexture" file="Interface\Buttons\UI-Quickslot2">
			<Size x="64" y="64"/>
			<Anchors><Anchor point="CENTER"><Offset x="0" y="-1"/></Anchor></Anchors>
		</NormalTexture>
		<PushedTexture file="Interface\Buttons\UI-Quickslot-Depress"/>
		<HighlightTexture file="Interface\Buttons\ButtonHilight-Square" alphaMode="ADD"/>
		<Scripts>
			<OnLoad>
				BagnonBag_OnLoad()
			</OnLoad>
			<OnShow>
				BagnonBag_OnShow()
			</OnShow>
			<OnEnter>
				BagnonBag_OnEnter()
			</OnEnter>
			<OnLeave>
				BagnonBag_OnLeave()
			</OnLeave>
			<OnClick>
				BagnonBag_OnClick()
			</OnClick>
			<OnDragStart>
				BagnonBag_OnDrag()
			</OnDragStart>
			<OnReceiveDrag>
				BagnonBag_OnClick()
			</OnReceiveDrag>
		</Scripts>
	</Button>

	<!-- Item -->
 	<Button name="BagnonItemTemplate" hidden="true" virtual="true">
		<Size x="37" y="37"/>
		<Layers>
			<Layer level="BORDER">
				<Texture name="$parentIconTexture" setAllPoints="true"/>
				<FontString name="$parentCount" font="NumberFontNormal" justifyH="RIGHT" hidden="true">
					<Anchors>
						<Anchor point="BOTTOMRIGHT">
							<Offset x="-2" y="2"/>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
			<Layer level="OVERLAY">
				<Texture name="$parentBorder" file="Interface\Buttons\UI-ActionButton-Border" alphaMode="ADD" hidden="true">
					<Size x="67" y="67"/>

					<Anchors>
						<Anchor point="CENTER"/>
					</Anchors>
				</Texture>
			</Layer>
		</Layers>
		<Frames>
			<Model name="$parentCooldown" inherits="CooldownFrameTemplate"/>
		</Frames>
		<NormalTexture name="$parentNormalTexture" file="Interface\Buttons\UI-Quickslot2">
			<Size x="64" y="64"/>
			<Anchors>
				<Anchor point="CENTER">
					<Offset x="0" y="-1"/>
				</Anchor>
			</Anchors>
		</NormalTexture>
		<PushedTexture file="Interface\Buttons\UI-Quickslot-Depress"/>
		<HighlightTexture file="Interface\Buttons\ButtonHilight-Square" alphaMode="ADD"/>
	</Button>

	<!-- Frame -->
	<Frame name="BagnonPopupFrame" clampedToScreen="true" enableMouse="true" toplevel="true" parent="UIParent" frameStrata="DIALOG" hidden="true" virtual="true">
		<Backdrop edgeFile="Interface\Tooltips\UI-Tooltip-Border">
			<BackgroundInsets>
				<AbsInset left="4" right="4" top="4" bottom="4"/>
			</BackgroundInsets>
			<EdgeSize>
				<AbsValue val="16"/>
			</EdgeSize>
			<BorderColor r="0.6" g="0.6" b="0.6"/>
		</Backdrop>
		<Layers>
			<Layer level ="BACKGROUND">
				<Texture file="Interface\ChatFrame\ChatFrameBackground">
					<Anchors><Anchor point="TOPLEFT"><Offset x="4" y="-4"/></Anchor><Anchor point="BOTTOMRIGHT"><Offset x="-4" y="4"/></Anchor></Anchors>
					<Gradient orientation="VERTICAL">
						<MinColor r="0" g="0" b="0" a="0.9"/>
						<MaxColor r="0.2" g="0.2" b="0.2" a="0.9"/>
					</Gradient>
				</Texture>
			</Layer>
		</Layers>
	</Frame>
	<Button name="BagnonFrameTemplate" frameStrata="HIGH" movable="true" enableMouse="true" parent="UIParent" hidden="true" virtual="true">
		<Backdrop bgFile="Interface\ChatFrame\ChatFrameBackground" edgeFile="Interface\Tooltips\UI-Tooltip-Border">
			<BackgroundInsets>
				<AbsInset left="4" right="4" top="4" bottom="4"/>
			</BackgroundInsets>
			<TileSize>
				<AbsValue val="16"/>
			</TileSize>
			<EdgeSize>
				<AbsValue val="16"/>
			</EdgeSize>
		</Backdrop>
		<Frames>
			<Button name="$parentCloseButton" inherits="UIPanelCloseButton">
				<Anchors><Anchor point="TOPRIGHT"><Offset><AbsDimension x="-2" y="-2"/></Offset></Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						if BagnonSpot and BagnonSpot:IsShown() and BagnonSpot.frame == this:GetParent() then
							BagnonSpot:Hide()
						else
							HideUIPanel(this:GetParent())
						end
					</OnClick>
				</Scripts>
			</Button>
			<Button name="$parentTitle">
				<Anchors>
					<Anchor point="TOPLEFT"><Offset><AbsDimension x="-2" y="10"/></Offset></Anchor>
					<Anchor point="BOTTOMRIGHT" relativeTo="$parentCloseButton" relativePoint="BOTTOMLEFT"><Offset><AbsDimension x="4" y="-2"/></Offset></Anchor>
				</Anchors>
				<ButtonText setAllPoints="true"/>
				<NormalFont font="GameFontNormal" justifyH="LEFT"/>
				<HighlightFont font="GameFontHighlight" justifyH="LEFT"/>
				<Scripts>
					<OnLoad>
						this:RegisterForClicks("LeftButtonDown", "LeftButtonUp", "RightButtonUp")
					</OnLoad>
					<OnDoubleClick>
						BagnonFrame_OnDoubleClick(this:GetParent())
					</OnDoubleClick>
					<OnDragStart>
						BagnonFrame_StartMoving(this:GetParent())
					</OnDragStart>
					<OnMouseDown>
						BagnonFrame_StartMoving(this:GetParent())
					</OnMouseDown>
					<OnMouseUp>
						BagnonFrame_OnClick(this:GetParent(), arg1)
						BagnonFrame_StopMoving(this:GetParent())
					</OnMouseUp>
					<OnEnter>
						BagnonFrame_OnEnter()
					</OnEnter>
					<OnLeave>
						BagnonFrame_OnLeave()
					</OnLeave>
				</Scripts>
			</Button>
			<Frame name="$parentMoneyFrame" inherits="SmallMoneyFrameTemplate" hidden="false">
				<Anchors><Anchor point="BOTTOMRIGHT"><Offset><AbsDimension x="0" y="10"/></Offset></Anchor></Anchors>
				<Frames>
					<Button name="$parentHoverFrame" setAllPoints="true">
						<Scripts>
							<OnLoad>
								this:SetFrameLevel(this:GetFrameLevel() + 1)
							</OnLoad>
							<OnClick>
								BagnonFrameMoney_OnClick()
							</OnClick>
							<OnEnter>
								BagnonFrameMoney_OnEnter()
							</OnEnter>
							<OnLeave>
								BagnonFrameMoney_OnLeave()
							</OnLeave>
						</Scripts>
					</Button>
				</Frames>
				<Scripts>
					<OnShow>
						if(not this:GetParent().player or this:GetParent().player == UnitName("player") ) then
							MoneyFrame_UpdateMoney()
						end
					</OnShow>
				</Scripts>
			</Frame>
		</Frames>
		<Scripts>
			<OnMouseDown>
				BagnonFrame_StartMoving(this)
			</OnMouseDown>
			<OnMouseUp>
				BagnonFrame_StopMoving(this)
			</OnMouseUp>
			<OnHide>
				BagnonFrame_OnHide()
			</OnHide>
		</Scripts>
	</Button>

	<!-- Menu-->
	<Slider name="BagnonSlider" inherits="OptionsSliderTemplate" virtual="true">
		<Size x="216" y="18"/>
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentValText" inherits="GameFontNormalSmall">
					<Anchors><Anchor point="BOTTOM"><Offset x="0" y="-6"/></Anchor></Anchors>
				</FontString>
			</Layer>
		</Layers>
	</Slider>
	<CheckButton name="BagnonCheckButton" virtual="true">
		<Size x="32" y="32"/>
		<Anchors><Anchor point="TOPLEFT" relativePoint="TOPLEFT"><Offset x="18" y="-36"/></Anchor></Anchors>
		<ButtonText name="$parentText" inherits="GameFontNormalSmall">
			<Anchors><Anchor point="LEFT" relativePoint="RIGHT"><Offset x="-2" y="0"/></Anchor></Anchors>
		</ButtonText>
		<NormalFont font="GameFontNormalSmall"/>
		<NormalTexture file="Interface\Buttons\UI-CheckBox-Up"/>
		<PushedTexture file="Interface\Buttons\UI-CheckBox-Down"/>
		<HighlightTexture file="Interface\Buttons\UI-CheckBox-Highlight" alphaMode="ADD"/>
		<CheckedTexture file="Interface\Buttons\UI-CheckBox-Check"/>
	</CheckButton>
	<Button name="BagnonMenu" inherits="BagnonPopupFrame">
		<Size x="230" y="376"/>
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentText" inherits="GameFontHighlightLarge" text="Settings">
					<Anchors><Anchor point="TOP"><Offset x="0" y="-8"/></Anchor></Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Button name="$parentCloseButton" inherits="UIPanelCloseButton">
				<Anchors><Anchor point="TOPRIGHT"><Offset x="-1" y="-1"/></Anchor></Anchors>
			</Button>
			<CheckButton name="$parentLocked" inherits="BagnonCheckButton" text="BAGNON_OPTIONS_LOCK">
				<Anchors><Anchor point="TOPLEFT"><Offset x="6" y="-30"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonMenu_ToggleLock(this:GetParent().frame, this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentReverse" inherits="BagnonCheckButton" text="BAGNON_OPTIONS_REVERSE">
				<Anchors><Anchor point="TOPLEFT" relativeTo="$parentLocked" relativePoint="BOTTOMLEFT"/></Anchors>
				<Scripts>
					<OnClick>
						BagnonMenu_ToggleOrder(this:GetParent().frame, this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentStayOnScreen" inherits="BagnonCheckButton" text="BAGNON_OPTIONS_STAY_ON_SCREEN">
				<Anchors><Anchor point="TOPLEFT" relativeTo="$parentReverse" relativePoint="BOTTOMLEFT"/></Anchors>
				<Scripts>
					<OnClick>
						BagnonMenu_ToggleStayOnScreen(this:GetParent().frame, this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<Button name="$parentBGSettings" text="BAGNON_OPTIONS_BACKGROUND">
				<Size x="32" y="32"/>
				<Anchors><Anchor point="TOPLEFT" relativeTo="$parentStayOnScreen" relativePoint="BOTTOMLEFT"><Offset x="4" y="2"/></Anchor></Anchors>
				<Layers>
					<Layer level="BACKGROUND">
						<Texture name="$parentSwatchBackground">
							<Size x="24" y="24"/>
							<Anchors><Anchor point="LEFT"/></Anchors>
							<Color r="0.5" g="0.5" b="0.5"/>
						</Texture>
					</Layer>
				</Layers>
				<NormalTexture name="$parentNormalTexture" file="Interface\ChatFrame\ChatFrameColorSwatch">
					<Size x="30" y="30"/>
					<Anchors><Anchor point="LEFT"><Offset x="-3" y="0"/></Anchor></Anchors>
				</NormalTexture>
				<ButtonText>
					<Anchors><Anchor point="LEFT" relativeTo="$parentNormalTexture" relativePoint="RIGHT"><Offset x="-2" y="0"/></Anchor></Anchors>
				</ButtonText>
				<NormalFont font="GameFontNormalSmall" justifyH="RIGHT"/>
				<HighlightFont font="GameFontHighlightSmall" justifyH="RIGHT"/>
				<Scripts>
					<OnLoad>
						this:RegisterForClicks("LeftButtonUp", "RightButtonUp")
					</OnLoad>
					<OnClick>
						BagnonMenuBG_OnClick(this:GetParent().frame)
					</OnClick>
					<OnHide>
						this:UnlockHighlight()
					</OnHide>
				</Scripts>
			</Button>
			<Slider name="$parentColumns" inherits="BagnonSlider" minValue="1" maxValue="32" valuestep="1">
				<Anchors><Anchor point="TOPLEFT" relativeTo="$parentBGSettings" relativePoint="BOTTOMLEFT"><Offset x="-4" y="-12"/></Anchor></Anchors>
				<Scripts>
					<OnLoad>
						getglobal(this:GetName().."Text"):SetText(BAGNON_OPTIONS_COLUMNS)
						getglobal(this:GetName().."Low"):SetText("1")
						getglobal(this:GetName().."High"):SetText("32")
					</OnLoad>
					<OnValueChanged>
						if(not this:GetParent().onShow) then
							local frame = this:GetParent().frame
							BagnonFrame_Layout(frame, this:GetValue(), frame.space)
						end
						getglobal(this:GetName().."ValText"):SetText( this:GetValue() )
					</OnValueChanged>
				</Scripts>
			</Slider>
			<Slider name="$parentSpacing" inherits="BagnonSlider" minValue="0" maxValue="32" valuestep="1">
				<Anchors><Anchor point="TOP" relativeTo="$parentColumns" relativePoint="BOTTOM"><Offset x="0" y="-24"/></Anchor></Anchors>
				<Scripts>
					<OnLoad>
						getglobal(this:GetName().."Text"):SetText(BAGNON_OPTIONS_SPACING)
						getglobal(this:GetName().."Low"):SetText("0")
						getglobal(this:GetName().."High"):SetText("32")
					</OnLoad>
					<OnValueChanged>
						if(not this:GetParent().onShow) then
							local frame = this:GetParent().frame
							BagnonFrame_Layout(frame, frame.cols, this:GetValue() )
						end
						getglobal(this:GetName().."ValText"):SetText( this:GetValue() )
					</OnValueChanged>
				</Scripts>
			</Slider>
			<Slider name="$parentScale" inherits="BagnonSlider" minValue="50" maxValue="150" valuestep="1">
				<Anchors><Anchor point="TOP" relativeTo="$parentSpacing" relativePoint="BOTTOM"><Offset x="0" y="-24"/></Anchor></Anchors>
				<Scripts>
					<OnLoad>
						getglobal(this:GetName().."Text"):SetText(BAGNON_OPTIONS_SCALE)
						getglobal(this:GetName().."Low"):SetText("50%")
						getglobal(this:GetName().."High"):SetText("150%")
					</OnLoad>
					<OnValueChanged>
						if(not this:GetParent().onShow) then
							BagnonMenu_SetScale(this:GetParent().frame, this:GetValue() / 100 )
						end
						getglobal(this:GetName().."ValText"):SetText( this:GetValue() )
					</OnValueChanged>
				</Scripts>
			</Slider>
			<Slider name="$parentOpacity" inherits="BagnonSlider" minValue="0" maxValue="100" valuestep="1">
				<Anchors><Anchor point="TOP" relativeTo="$parentScale" relativePoint="BOTTOM"><Offset x="0" y="-24"/></Anchor></Anchors>
				<Scripts>
					<OnLoad>
						getglobal(this:GetName().."Text"):SetText(BAGNON_OPTIONS_OPACITY)
						getglobal(this:GetName().."Low"):SetText("0%")
						getglobal(this:GetName().."High"):SetText("100%")
					</OnLoad>
					<OnValueChanged>
						if not this:GetParent().onShow then BagnonMenu_SetAlpha(this:GetParent().frame, this:GetValue() / 100) end
						getglobal(this:GetName().."ValText"):SetText(this:GetValue())
					</OnValueChanged>
				</Scripts>
			</Slider>
			<Slider name="$parentStrata" inherits="BagnonSlider" minValue="1" maxValue="3" valuestep="1">
				<Anchors><Anchor point="TOPLEFT" relativeTo="$parentOpacity" relativePoint="BOTTOMLEFT"><Offset x="0" y="-24"/></Anchor></Anchors>
				<Scripts>
					<OnLoad>
						getglobal(this:GetName().."Text"):SetText(BAGNON_OPTIONS_STRATA)
						getglobal(this:GetName().."Low"):SetText("Low")
						getglobal(this:GetName().."High"):SetText("High")
					</OnLoad>
					<OnValueChanged>
						if(not this:GetParent().onShow) then
							BagnonFrame_SetStrata(this:GetParent().frame, this:GetValue() )
						end
					</OnValueChanged>
				</Scripts>
			</Slider>
		</Frames>
		<Scripts>
			<OnLoad>
				this:RegisterForClicks("LeftButtonDown", "LeftButtonUp", "RightButtonUp")
			</OnLoad>
			<OnClick>
				this:Hide()
			</OnClick>
			<OnHide>
				this:SetParent(UIParent)
			</OnHide>
		</Scripts>
	</Button>

	<!-- Spot Search-->
	<EditBox name="BagnonSpot" inherits="BagnonPopupFrame" autoFocus="false">
		<Scripts>
			<OnLoad>
				this:SetTextInsets(8, 8, 0, 0)
			</OnLoad>
			<OnShow>
				this:SetFocus()
			</OnShow>
			<OnHide>
				this:SetText("")
				BagnonSpot_ClearSearch()
			</OnHide>
			<OnEscapePressed>
				this:ClearFocus()
				this:Hide("")
			</OnEscapePressed>
			<OnEditFocusLost>
				this:HighlightText()
			</OnEditFocusLost>
			<OnTextChanged>
				BagnonSpot_Search(this:GetText())
			</OnTextChanged>
		</Scripts>
		<FontString font="ChatFontNormal"/>
	</EditBox>

	<!-- Bagnon-->
	<Button name="BagnonMainBagTemplate" id="0" virtual="true">
		<Size x="37" y="37"/>
		<Layers>
			<Layer level="BORDER">
				<Texture name="$parentIconTexture" file="Interface\Buttons\Button-Backpack-Up" setAllPoints="true"/>
				<FontString name="$parentCount" font="NumberFontNormal" justifyH="RIGHT" hidden="true">
					<Anchors>
						<Anchor point="BOTTOMRIGHT">
							<Offset x="-2" y="2"/>
						</Anchor>
					</Anchors>
				</FontString>
			</Layer>
		</Layers>
		<NormalTexture name="$parentNormalTexture" file="Interface\Buttons\UI-Quickslot2">
			<Size x="64" y="64"/>
			<Anchors>
				<Anchor point="CENTER">
					<Offset x="0" y="-1"/>
				</Anchor>
			</Anchors>
		</NormalTexture>
		<PushedTexture file="Interface\Buttons\UI-Quickslot-Depress"/>
		<HighlightTexture file="Interface\Buttons\ButtonHilight-Square" alphaMode="ADD"/>	
		<Scripts>
			<OnLoad>
				this:RegisterForClicks("LeftButtonUp", "RightButtonUp")
			</OnLoad>
			<OnEnter>
				BagnonBag_OnEnter()
			</OnEnter>
			<OnLeave>
				BagnonBag_OnLeave()
			</OnLeave>
			<OnClick>
				BagnonBag_OnClick()
			</OnClick>
			<OnReceiveDrag>
				BagnonBag_OnClick()
			</OnReceiveDrag>
		</Scripts>
	</Button>
	<Button name="BagnonKeyButton" virtual="true">
		<Size x="18" y="39"/>
		<Scripts>
			<OnLoad>
				this:SetID(-2)
				this:RegisterForClicks("LeftButtonUp", "RightButtonUp")
			</OnLoad>
			<OnEnter>
				BagnonBag_OnEnter()
			</OnEnter>
			<OnLeave>
				BagnonBag_OnLeave()
			</OnLeave>
			<OnClick>
				BagnonBag_OnClick()
			</OnClick>
			<OnReceiveDrag>
				BagnonBag_OnClick()
			</OnReceiveDrag>
		</Scripts>
		<NormalTexture file="Interface\Buttons\UI-Button-KeyRing">
			<TexCoords left="0" right="0.5625" top="0" bottom="0.609375"/>
		</NormalTexture>
		<HighlightTexture file="Interface\Buttons\UI-Button-KeyRing-Highlight" alphaMode="ADD">
			<TexCoords left="0" right="0.5625" top="0" bottom="0.609375"/>
		</HighlightTexture>
		<PushedTexture file="Interface\Buttons\UI-Button-KeyRing-Down">
			<TexCoords left="0" right="0.5625" top="0" bottom="0.609375"/>
		</PushedTexture>
	</Button>
	<Frame name="BagnonBagSlots" inherits="BagnonBagSlotsTemplate" virtual="true">
		<Size x="188" y="42"/>
		<Frames>
			<Button name="$parent0" inherits="BagnonMainBagTemplate" id="0">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset x="8" y="4"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent1" inherits="BagnonBagTemplate" id="1">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent0" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent2" inherits="BagnonBagTemplate" id="2">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent1" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent3" inherits="BagnonBagTemplate" id="3">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent2" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent4" inherits="BagnonBagTemplate" id="4">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent3" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent-2" inherits="BagnonKeyButton" id="-2">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent4" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
		</Frames>
	</Frame>
	<Button name="Bagnon" inherits="BagnonFrameTemplate">
		<Anchors>
			<Anchor point="BOTTOMRIGHT">
				<Offset x="0" y="80"/>
			</Anchor>
		</Anchors>
		<Frames>		
			<Frame name="$parentBags" inherits="BagnonBagSlots" hidden="true">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset x="0" y="24"/>
					</Anchor>
				</Anchors>
			</Frame>
			<Button name="$parentShowBags" text="BAGNON_SHOWBAGS">
				<Size x="72" y="32"/>
				
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset x="10" y="0"/>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						Bagnon_ToggleBags()
					</OnClick>
				</Scripts>
				<ButtonText setAllPoints="true"/>
				<NormalFont font="GameFontNormal" justifyH="LEFT"/>
				<HighlightFont font="GameFontHighlight" justifyH="LEFT"/>
			</Button>
		</Frames>
		<Scripts>
			<OnShow>
				Bagnon_OnShow()
			</OnShow>
			<OnHide>
				BagnonFrame_OnHide()
				Bagnon_OnHide()
			</OnHide>
		</Scripts>
	</Button>

	<!-- Banknon-->
	<Frame name="BanknonBagSlots" inherits="BagnonBagSlotsTemplate" virtual="true">
		<Size x="248" y="68"/>
		<Frames>
			<Button name="$parent5" inherits="BagnonBagTemplate" id="5">
				<Anchors>
					<Anchor point="BOTTOMLEFT" relativePoint="BOTTOMLEFT">
						<Offset x="0" y="4"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent6" inherits="BagnonBagTemplate" id="6">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent5" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent7" inherits="BagnonBagTemplate" id="7">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent6" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent8" inherits="BagnonBagTemplate" id="8">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent7" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent9" inherits="BagnonBagTemplate" id="9">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent8" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
			<Button name="$parent10" inherits="BagnonBagTemplate" id="10">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parent9" relativePoint="RIGHT">
						<Offset x="2" y="0"/>
					</Anchor>
				</Anchors>
			</Button>
		</Frames>
	</Frame>
	<Button name="Banknon" inherits="BagnonFrameTemplate">
		<Anchors>
			<Anchor point="TOPRIGHT">
				<Offset x="-160" y="-50"/>
			</Anchor>
		</Anchors>
		<Frames>
			<Frame name="$parentBags" inherits="BanknonBagSlots" hidden="true">
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset x="8" y="24"/>
					</Anchor>
				</Anchors>
			</Frame>
			<Button name="$parentPurchase" inherits="UIPanelButtonTemplate" text="BANKSLOTPURCHASE" hidden="true">
				<Size x="124" y="21"/>
				<Anchors>
					<Anchor point="TOPLEFT" relativeTo="$parentBags">
						<Offset x="8" y="0"/>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						PlaySound("igMainMenuOption")
						StaticPopup_Show("CONFIRM_BUY_BANK_SLOT_BANKNON")
					</OnClick>
				</Scripts>
				<NormalFont font="GameFontNormal"/>
				<DisabledFont font="GameFontDisable"/>
				<HighlightFont font="GameFontHighlight"/>
			</Button>
			<Frame name="$parentCost" inherits="SmallMoneyFrameTemplate" hidden="true">
				<Anchors>
					<Anchor point="LEFT" relativeTo="$parentPurchase" relativePoint="RIGHT">
						<Offset x="4" y="0"/>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnLoad>
						SmallMoneyFrame_OnLoad()
						MoneyFrame_SetType("STATIC")
					</OnLoad>
				</Scripts>
			</Frame>
			<Button name="$parentShowBags" text="BAGNON_SHOWBAGS">
				<Size x="72" y="32"/>
				<Anchors>
					<Anchor point="BOTTOMLEFT">
						<Offset x="10" y="0"/>
					</Anchor>
				</Anchors>
				<Scripts>
					<OnClick>
						Banknon_ToggleSlots()
					</OnClick>
				</Scripts>
				
				<ButtonText setAllPoints="true"/>
				<NormalFont font="GameFontNormal" justifyH="LEFT"/>
				<HighlightFont font="GameFontHighlight" justifyH="LEFT"/>
			</Button>
		</Frames>
		<Scripts>
			<OnLoad>
				Banknon_OnLoad()
			</OnLoad>
			<OnEvent>
				Banknon_OnEvent(event)
			</OnEvent>
			<OnShow>
				Banknon_OnShow()
			</OnShow>
			<OnHide>
				BagnonFrame_OnHide()
				Banknon_OnHide()
			</OnHide>
		</Scripts>
	</Button>

	<!-- Options Menu -->
	<CheckButton name="BagnonOptionsAtEventButtonTemplate" virtual="true">
		<Size x="32" y="32"/>
		<NormalTexture file="Interface\Buttons\UI-CheckBox-Up"/>
		<PushedTexture file="Interface\Buttons\UI-CheckBox-Down"/>
		<HighlightTexture file="Interface\Buttons\UI-CheckBox-Highlight" alphaMode="ADD"/>
		<CheckedTexture file="Interface\Buttons\UI-CheckBox-Check"/>
		<DisabledCheckedTexture file="Interface\Buttons\UI-CheckBox-Check-Disabled"/>
	</CheckButton>
	<CheckButton name="BagnonOptionsCheckButtonTemplate" virtual="true">
		<Size x="32" y="32"/>
		<Anchors>
			<Anchor point="TOPLEFT" relativePoint="TOPLEFT">
				<Offset x="18" y="-36"/>
			</Anchor>
		</Anchors>
		<ButtonText name="$parentText" inherits="GameFontNormal">
			<Anchors>
				<Anchor point="LEFT" relativePoint="RIGHT">
					<Offset x="-2" y="0"/>
				</Anchor>
			</Anchors>
		</ButtonText>
		<NormalFont font="GameFontNormal"/>
		<NormalTexture file="Interface\Buttons\UI-CheckBox-Up"/>
		<PushedTexture file="Interface\Buttons\UI-CheckBox-Down"/>
		<HighlightTexture file="Interface\Buttons\UI-CheckBox-Highlight" alphaMode="ADD"/>
		<CheckedTexture file="Interface\Buttons\UI-CheckBox-Check"/>
	</CheckButton>
	<Frame name="BagnonOptions" movable="true" clampedToScreen="true" enableMouse="true" frameStrata="DIALOG" hidden="true" parent="UIParent">
		<Size x="254" y="386"/>
		<Anchors>
			<Anchor point="LEFT"/>
		</Anchors>
		<Backdrop bgFile="Interface\CharacterFrame\UI-Party-Background" edgeFile="Interface\DialogFrame\UI-DialogBox-Border" tile="true">
			<BackgroundInsets>
				<AbsInset left="11" right="12" top="12" bottom="11"/>
			</BackgroundInsets>
			<TileSize>
				<AbsValue val="32"/>
			</TileSize>
			<EdgeSize>
				<AbsValue val="32"/>
			</EdgeSize>
		</Backdrop>
		<Layers>
			<Layer level="ARTWORK">
				<FontString name="$parentTitle" font="GameFontHighlightLarge" text="BAGNON_MAINOPTIONS_TITLE">
					<Anchors><Anchor point="TOP"><Offset x="0" y="-16"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentShowWhen" font="GameFontNormal" text="BAGNON_MAINOPTIONS_SHOW">
					<Anchors><Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="TOPLEFT"><Offset x="16" y="-142"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentBanknonDiv" font="GameFontNormal" text="Banknon">
					<Anchors><Anchor point="TOPRIGHT" relativeTo="$parent" relativePoint="TOPRIGHT"><Offset x="-16" y="-142"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentBagnonDiv" font="GameFontNormal" text="Bagnon">
					<Anchors><Anchor point="RIGHT" relativeTo="$parentBanknonDiv" relativePoint="LEFT"><Offset x="-8" y="0"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentAtBank" font="GameFontNormal" text="BAGNON_MAINOPTIONS_SHOW_BANK">
					<Anchors><Anchor point="TOPLEFT" relativeTo="$parentShowWhen" relativePoint="BOTTOMLEFT"><Offset x="0" y="-22"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentAtVendor" font="GameFontNormal" text="BAGNON_MAINOPTIONS_SHOW_VENDOR">
					<Anchors><Anchor point="TOPLEFT" relativeTo="$parentAtBank" relativePoint="BOTTOMLEFT"><Offset x="0" y="-22"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentAtAH" font="GameFontNormal" text="BAGNON_MAINOPTIONS_SHOW_AH">
					<Anchors><Anchor point="TOPLEFT" relativeTo="$parentAtVendor" relativePoint="BOTTOMLEFT"><Offset x="0" y="-22"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentAtMail" font="GameFontNormal" text="BAGNON_MAINOPTIONS_SHOW_MAILBOX">
					<Anchors><Anchor point="TOPLEFT" relativeTo="$parentAtAH" relativePoint="BOTTOMLEFT"><Offset x="0" y="-22"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentTrading" font="GameFontNormal" text="BAGNON_MAINOPTIONS_SHOW_TRADING">
					<Anchors><Anchor point="TOPLEFT" relativeTo="$parentAtMail" relativePoint="BOTTOMLEFT"><Offset x="0" y="-22"/></Anchor></Anchors>
				</FontString>
				<FontString name="$parentCrafting" font="GameFontNormal" text="BAGNON_MAINOPTIONS_SHOW_CRAFTING">
					<Anchors><Anchor point="TOPLEFT" relativeTo="$parentTrading" relativePoint="BOTTOMLEFT"><Offset x="0" y="-22"/></Anchor></Anchors>
				</FontString>
			</Layer>
		</Layers>
		<Frames>
			<Button name="$parentCloseButton" inherits="UIPanelCloseButton">
				<Anchors><Anchor point="TOPRIGHT" relativePoint="TOPRIGHT"><Offset x="-8" y="-8"/></Anchor></Anchors>
			</Button>
			<CheckButton name="$parentTooltips" inherits="BagnonOptionsCheckButtonTemplate" text="BAGNON_MAINOPTIONS_SHOW_TOOLTIPS">
				<Anchors><Anchor point="TOPLEFT" relativeTo="$parent" relativePoint="TOPLEFT"><Offset x="14" y="-42"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowTooltips(this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentForeverTooltips" inherits="BagnonOptionsCheckButtonTemplate" text="BAGNON_MAINOPTIONS_SHOW_FOREVERTOOLTIPS">
				<Anchors><Anchor point="TOPLEFT" relativeTo="$parentTooltips" relativePoint="BOTTOMLEFT"><Offset x="0" y="0"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowForeverTooltips(this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentQuality" inherits="BagnonOptionsCheckButtonTemplate" text="BAGNON_MAINOPTIONS_SHOW_BORDERS">
				<Anchors><Anchor point="TOPLEFT" relativeTo="$parentForeverTooltips" relativePoint="BOTTOMLEFT"><Offset x="0" y="0"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowQualityBorders(this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBagnon1" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentBagnonDiv" relativePoint="BOTTOM"><Offset x="0" y="-12"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtBank(this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBagnon2" inherits="BagnonOptionsAtEventButtonTemplate" checked="true">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBagnon1" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnLoad>
						this:Disable()
					</OnLoad>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBagnon3" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBagnon2" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtAH(this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBagnon4" inherits="BagnonOptionsAtEventButtonTemplate" checked="true">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBagnon3" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnLoad>
						this:Disable()
					</OnLoad>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBagnon5" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBagnon4" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtTrade(this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBagnon6" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBagnon5" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtCrafting(this:GetChecked())
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBanknon1" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentBanknonDiv" relativePoint="BOTTOM"><Offset x="0" y="-12"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtBank(this:GetChecked(), 1)
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBanknon2" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBanknon1" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtVendor(this:GetChecked(), 1)
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBanknon3" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBanknon2" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtAH(this:GetChecked(), 1)
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBanknon4" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBanknon3" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtMail(this:GetChecked(), 1)
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBanknon5" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBanknon4" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtTrade(this:GetChecked(), 1)
					</OnClick>
				</Scripts>
			</CheckButton>
			<CheckButton name="$parentShowBanknon6" inherits="BagnonOptionsAtEventButtonTemplate">
				<Anchors><Anchor point="TOP" relativeTo="$parentShowBanknon5" relativePoint="BOTTOM"><Offset x="0" y="-2"/></Anchor></Anchors>
				<Scripts>
					<OnClick>
						BagnonOptions_ShowAtCrafting(this:GetChecked(), 1)
					</OnClick>
				</Scripts>
			</CheckButton>
		</Frames>
		<Scripts>
			<OnShow>
				BagnonOptions_OnShow()
			</OnShow>
			<OnMouseDown>
				this:StartMoving()
			</OnMouseDown>
			<OnMouseUp>
				this:StopMovingOrSizing()
			</OnMouseUp>
		</Scripts>
	</Frame>

	<!-- UI -->
	<Button name="BagnonDBUIDropDownButton" topLevel="true" virtual="true">
		<Size x="24" y="24"/>
		<Anchors><Anchor point="TOPLEFT"><Offset x="6" y="-6"/></Anchor></Anchors>
		<Scripts>
			<OnClick>
				if not BagnonDBUICharacterList:IsShown() then
					BagnonDBUI_ShowCharacterList(this:GetParent())
				else
					BagnonDBUICharacterList:Hide()
				end
			</OnClick>
		</Scripts>
		<NormalTexture file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Up" setAllPoints="true"/>
		<PushedTexture file="Interface\ChatFrame\UI-ChatIcon-ScrollDown-Down" setAllPoints="true"/>
		<HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD" setAllPoints="true"/>
	</Button>
	<Button name="BagnonDBUIBankButton" topLevel="true" virtual="true">
		<Size x="24" y="24"/>
		<Anchors><Anchor point="TOPLEFT"><Offset x="6" y="-6"/></Anchor></Anchors>
		<Scripts>
			<OnClick>
				BagnonFrame_Toggle("Banknon")
--				if not Banknon:IsShown() then
--					Banknon:Show()
--				else
--					Banknon:Hide()
--				end
			</OnClick>
		</Scripts>
		<NormalTexture file="Interface\ChatFrame\UI-ChatIcon-ScrollUp-Up" setAllPoints="true"/>
		<PushedTexture file="Interface\ChatFrame\UI-ChatIcon-ScrollUp-Down" setAllPoints="true"/>
		<HighlightTexture file="Interface\Buttons\UI-Common-MouseHilight" alphaMode="ADD" setAllPoints="true"/>
	</Button>
	<CheckButton name="BagnonDBUIChangeNameButton" virtual="true">
		<Size x="140" y="24"/>
		<ButtonText>
			<Anchors><Anchor point="LEFT"><Offset x="24" y="0"/></Anchor></Anchors>
		</ButtonText>
		<NormalFont font = "GameFontNormalLarge"/>
		<HighlightFont font="GameFontHighlightLarge"/>
		<CheckedTexture file="Interface\Buttons\UI-CheckBox-Check">
			<Anchors><Anchor point="TOPLEFT"/><Anchor point="BOTTOMRIGHT" relativePoint="BOTTOMLEFT"><Offset x="24" y="0"/></Anchor></Anchors>
		</CheckedTexture>
		<Scripts>
			<OnClick>
				BagnonDBUI_ChangePlayer(Bagnon, this:GetText())
				if Banknon:IsVisible() then BagnonDBUI_ChangePlayer(Banknon, this:GetText()) end
				this:GetParent():Hide()
			</OnClick>
		</Scripts>
	</CheckButton>
	<Button name="BagnonDBUIDeleteNameButton" inherits="UIPanelCloseButton" virtual="true">
		<Size x="24" y="24"/>
		<Scripts>
			<OnClick>
				BagnonForever_RemovePlayer(this:GetParent():GetText(), GetRealmName())
				this:GetParent():GetParent():Hide()
			</OnClick>
		</Scripts>
	</Button>
	<Frame name="BagnonDBUICharacterList" inherits="BagnonPopupFrame">
		<Scripts>
			<OnLoad>
				this:RegisterEvent("BANKFRAME_OPENED")
			</OnLoad>
			<OnEvent>
				if Banknon and Banknon:IsShown() then BagnonDBUI_ChangePlayer(Bagnon, UnitName("player")) BagnonDBUI_ChangePlayer(Banknon, UnitName("player")) end
			</OnEvent>
			<OnHide>
				this:SetParent(UIParent)
			</OnHide>
		</Scripts>
	</Frame>
</Ui>